// ----------------------------------------------------------------------------------------------------
// ScrollMe
// A jQuery plugin for adding simple scrolling effects to web pages
// http://scrollme.nckprsn.com
// ----------------------------------------------------------------------------------------------------
(function(){$(function(){var g=$(document);var d=$(window);var k=0;var b=0;var l=0;var f=0;var h=-1;var a=[];var j=[];var c={opacity:1,translatex:0,translatey:0,translatez:0,rotatex:0,rotatey:0,rotatez:0,scale:1};init=function(){init_elements();on_resize();setInterval(update,10);d.resize(on_resize);window.addEventListener("orientationchange",function(){on_resize()},false);d.load(function(){setTimeout(function(){on_resize()},1000)})};init_elements=function(){$(".scrollme").each(function(){var m={};m.element=$(this);var n=[];$(this).find(".animateme").each(function(){var p={};p.element=$(this);p.when=p.element.data("when");p.from=p.element.data("from");p.to=p.element.data("to");if(p.element.is("[data-easing]")){p.easing=[p.element.data("easing")]}else{p.easing=easeout}var o={};if(p.element.is("[data-opacity]")){o.opacity=p.element.data("opacity")}if(p.element.is("[data-translatex]")){o.translatex=p.element.data("translatex")}if(p.element.is("[data-translatey]")){o.translatey=p.element.data("translatey")}if(p.element.is("[data-translatez]")){o.translatez=p.element.data("translatez")}if(p.element.is("[data-rotatex]")){o.rotatex=p.element.data("rotatex")}if(p.element.is("[data-rotatey]")){o.rotatey=p.element.data("rotatey")}if(p.element.is("[data-rotatez]")){o.rotatez=p.element.data("rotatez")}if(p.element.is("[data-scale]")){o.scale=p.element.data("scale")}p.properties=o;n.push(p)});m.effects=n;a.push(m)})};update=function(){window.requestAnimationFrame(function(){update_viewport_position();if(h!=l){update_elements_in_view();animate()}h=l})};animate=function(){for(i=0;i<j.length;i++){var n=j[i];for(e=0;e<n.effects.length;e++){var y=n.effects[e];switch(y.when){case"view":var t=n.top-b;var r=n.bottom;break;case"exit":var t=n.bottom-b;var r=n.bottom;break;default:var t=n.top-b;var r=n.top;break}if(t<0){t=0}if(r>(k-b)){r=k-b}var m=(l-t)/(r-t);var z=y.from;var o=y.to;var s=o-z;var p=(m-z)/s;var x=y.easing(p);var q=animate_value(m,x,z,o,y,"opacity");var v=animate_value(m,x,z,o,y,"translatey");var w=animate_value(m,x,z,o,y,"translatex");var u=animate_value(m,x,z,o,y,"translatez");var C=animate_value(m,x,z,o,y,"rotatex");var B=animate_value(m,x,z,o,y,"rotatey");var A=animate_value(m,x,z,o,y,"rotatez");var D=animate_value(m,x,z,o,y,"scale");y.element.css({opacity:q,transform:"translate3d( "+w+"px , "+v+"px , "+u+"px ) rotateX( "+C+"deg ) rotateY( "+B+"deg ) rotateZ( "+A+"deg ) scale( "+D+" )"})}}};animate_value=function(q,p,r,s,v,u){var o=c[u];if(!(u in v.properties)){return o}var m=v.properties[u];var n=(s>r)?true:false;if(q<r&&n){return o}if(q>s&&n){return m}if(q>r&&!n){return o}if(q<s&&!n){return m}var t=o+(p*(m-o));switch(u){case"opacity":t=t.toFixed(2);break;case"translatex":t=t.toFixed(0);break;case"translatey":t=t.toFixed(0);break;case"translatez":t=t.toFixed(0);break;case"rotatex":t=t.toFixed(1);break;case"rotatey":t=t.toFixed(1);break;case"rotatez":t=t.toFixed(1);break;case"scale":t=t.toFixed(2);break;default:break}return t};linear=function(m){return m};easeout=function(m){return m*m*m};easein=function(m){m=1-m;return 1-(m*m*m)};easeinout=function(m){if(m<0.5){return(4*m*m*m)}else{m=1-m;return 1-(4*m*m*m)}};update_viewport_position=function(){l=d.scrollTop();f=l+b};update_elements_in_view=function(){j=[];for(i=0;i<a.length;i++){if((a[i].top<f)&&(a[i].bottom>l)){j.push(a[i])}}};on_resize=function(){update_viewport();update_element_heights();update_viewport_position();update_elements_in_view();animate()};update_viewport=function(){k=g.height();b=d.height()};update_element_heights=function(){for(i=0;i<a.length;i++){var n=a[i].element.outerHeight();var m=a[i].element.offset();a[i].height=n;a[i].top=m.top;a[i].bottom=m.top+n}};g.ready(function(){init()})})}).call(this);
